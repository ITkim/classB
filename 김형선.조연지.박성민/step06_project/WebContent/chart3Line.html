<!DOCTYPE html>
<html>
  <head>
  <meta charset="EUC-KR">
  
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['line']});
      //google.charts.setOnLoadCallback(drawChart);

    function drawChart(v) {
    	
    	
	alert(v);	
		data = eval(v);
		//alert(data);
	 var data = new google.visualization.DataTable();
      data.addColumn('number', 'Month');
      data.addColumn('number', 'Major Supermarkets');
      data.addColumn('number', 'Department Store');
      
		v =   [  
	        [1,  30280, 41550],
	        [2,  28904, 40540],
	        [3,  32796, 40575],
	        [4, 38404, 37560],
	        [5,  38400, 39810],
	        [6,  40450, 38775],
	        [7,  34360, 40725]
	];
     

      data.addRows(v);

      var options = {
        chart: {
          title: 'Market Price Changes',
          subtitle: 'Beef'
        },
        width: 750,
        height: 400,
        axes: {
          x: {
            0: {side: 'top'}
          }
        }
      };

      var chart = new google.charts.Line(document.getElementById('line_top_x'));

      chart.draw(data, google.charts.Line.convertOptions(options));
    }
  </script>
</head>
<body>
  <div id="line_top_x"></div>
  
  <br><hr><br>
    <button onclick="ajaxReq2()">차트 그리기 비동기 요청</button>
    
    <script type="text/javascript">
		function ajaxReq2(){
				  var xhttp = new XMLHttpRequest();
				  xhttp.onreadystatechange = function() {
				    if (this.readyState == 4 && this.status == 200) {
				    	drawChart(this.responseText);
				    }
				  };
				  xhttp.open("GET", "chart3LineRes.jsp", true);
				  xhttp.send();
		}
	</script>
</body>
</html>
